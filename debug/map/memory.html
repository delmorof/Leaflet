<!DOCTYPE html>
<html>
<head>
	<title>Leaflet debug page</title>

	<link rel="stylesheet" href="../../dist/leaflet.css" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="../css/screen.css" />

	<script type="text/javascript" src="../../build/deps.js"></script>
	<script src="../leaflet-include.js"></script>
	<script src="../vector/route.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	
	<style>
	html,
	body,
	#container {
	  height: 100%;
	  width: 100%;
	}

	#map {
	  height: 90%;
	  width: 100%;
	  background-color: #f0f7fa;
	}
	</style>
</head>
<body>


	<div id="container">
	  <div id="map">
	  </div>
	  <button id="button">
		Color Map
	  </button>
	</div>



	<script type="text/javascript">

		
var space_geoJSON = {
  "type": "FeatureCollection",
  "crs": {
    "type": "name",
    "properties": {
      "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
    }
  },
  "dimensions": {
    "width": 3840,
    "height": 2160
  },
  "features": [{
    "type": "Feature",
    "properties": {
      "spaceid": "1"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1941.0001944415383, -735.99991790010461],
          [2152.0000766234625, -735.99997017150383],
          [2151.9984039386691, -1004.0096544854381],
          [1940.999253556341, -1003.9962730071024],
          [1940.9457276430016, -735.96526196207185],
          [1941.0001944415383, -735.99991790010461]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "2"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2714.0001299744986, -1455.000371830015],
          [2817.9850890866483, -1454.9986991452233],
          [2818.0285788912352, -1562.0003452794631],
          [2714.0344200127302, -1561.9468193661241],
          [2714.0210385343948, -1455.0154259931419],
          [2714.0001299744986, -1455.000371830015]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "3"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2826.0338392193985, -1160.0088182244494],
          [3031.9915176391091, -1159.9954367461144],
          [3032.0048991174444, -1521.9978793969219],
          [2826.0070762627288, -1522.0380238319262],
          [2826.0672929152365, -1159.9686737894449],
          [2826.0338392193985, -1160.0088182244494]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "4"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2559.0034190477777, -886.00183902324011],
          [2685.0153871328807, -886.02064601412144],
          [2685.0153871328812, -1003.9233815764313],
          [2559.0034190477745, -1003.9968998135138],
          [2558.9829023304474, -886.00696820257133],
          [2559.0034190477777, -886.00183902324011]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "5"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2671.9999557364963, -1160.0001411720939],
          [2672.1334568914467, -1160.1292515294626],
          [2816.9996686586505, -1159.9962730885113],
          [2817.0013413434417, -1282.9862768055891],
          [2672.0029874776801, -1282.9946402295495],
          [2671.9999557364963, -1160.0001411720939]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "6"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3406.0000735545764, -1215.0000557125061],
          [3536.0047945746473, -1214.9963444431232],
          [3536.0014492050645, -1316.9966630497504],
          [3406.0000049483656, -1316.9999953514846],
          [3405.9920237590159, -1214.9879810191649],
          [3406.0000735545764, -1215.0000557125061]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "7"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2714.0009663168921, -1571.0060801987495],
          [2817.9783983474786, -1571.0194616770837],
          [2818.0001432497725, -1717.0030268852408],
          [2713.997620947307, -1716.9963361460721],
          [2713.9742033602215, -1571.0211343618755],
          [2714.0009663168921, -1571.0060801987495]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "8"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2363.9860805838257, -1615.010496717171],
          [2363.9459361488198, -1615.0573318913418],
          [2425.9891604478853, -1614.9770430213339],
          [2425.9891604478858, -1649.9963718233737],
          [2363.9994620621601, -1649.9762996058714],
          [2363.9860805838257, -1615.010496717171]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "9"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1882.0002851292825, -1160.0009252430862],
          [2247.9954263782197, -1160.0000889006899],
          [2247.9887356390523, -1650.9899465897292],
          [2046.9955856815329, -1650.9899465897281],
          [2046.9989310511164, -1717.0643412371371],
          [1882.0019578140716, -1717.010815323797],
          [1882.0019578140716, -1160.0000889006883],
          [1882.0002851292825, -1160.0009252430862]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "10"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1810.9887919727305, -883.99585440809051],
          [1811.0255910381507, -883.99919977767456],
          [1931.0039257875135, -883.98581829933937],
          [1931.0039257875135, -1003.9909160053717],
          [1810.9954827118979, -1003.9942613749556],
          [1810.9887919727305, -883.99585440809051]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "11"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3290.0091228721317, -1856.0013979220023],
          [3408.0003080887841, -1855.9997252372109],
          [3408.0000005859388, -2049.0000023715652],
          [3289.9988009041576, -2049.0001216156943],
          [3290.0167822656686, -1856.0065866751663],
          [3290.0091228721317, -1856.0013979220023]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "12"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1558.0000261751502, -176.99979509083718],
          [1557.995635377571, -176.9933134372688],
          [1683.0054059807999, -176.9665504805993],
          [1682.9920245024657, -325.03260825460092],
          [1557.9688724209025, -324.95231938459239],
          [1558.0000261751502, -176.99979509083718]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "13"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [19.000127615026319, -963.000036110731],
          [19.016906734344122, -963.01644933025102],
          [176.9997899251895, -963.00014065353139],
          [177.00020809638789, -1065.9998884232843],
          [18.999990402601941, -1066.0000060339335],
          [19.000127615026319, -963.000036110731]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "14"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1559.9999729103688, -856.99994942888554],
          [1560.0324334496099, -856.96105950747506],
          [1685.9999996586237, -857.00000047517449],
          [1686.0001297245678, -1004.9999361536095],
          [1560.0000055799942, -1004.9999492214596],
          [1559.9999729103688, -856.99994942888554]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "15"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3293.001321560173, -1099.002377537558],
          [3395.999999399713, -1098.9999991888699],
          [3396.0001366121378, -1317.0000084193348],
          [3293.0008070135823, -1316.9993811625379],
          [3292.9874255352461, -1099.0217898286385],
          [3293.001321560173, -1099.002377537558]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "16"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2622.9999942140521, -1660.9999980480218],
          [2623.0071749975918, -1836.9924954427477],
          [2516.9924128905404, -1836.9858047035796],
          [2516.9790314122056, -1660.9190035141141],
          [2621.6757179032838, -1660.9992923841228],
          [2622.9999942140521, -1660.9999980480218]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "17"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2405.0000116553188, -885.99996601001817],
          [2548.9992761220515, -885.99986146721881],
          [2548.9725131653813, -1004.0211550101237],
          [2405.0413321968158, -1003.9676290967849],
          [2405.1350025451584, -885.96975314096437],
          [2405.0000116553188, -885.99996601001817]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "18"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2693.0459722392716, -717.98702139406146],
          [2842.0178567377516, -717.98018248828646],
          [2842.0041789262004, -1003.9695441904141],
          [2693.0117777103937, -1003.9934803606266],
          [2693.1212002027942, -718.00411865849878],
          [2693.0459722392716, -717.98702139406146]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "19"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3237.0001233243074, -862.00023741060568],
          [3395.7670395163987, -862.00020282023945],
          [3395.9995427087511, -862.00099291024503],
          [3396.0006565394901, -1001.9990699378324],
          [3236.9999665101054, -1001.9999739175581],
          [3237.0009243046329, -862.52452263685313],
          [3237.0001233243074, -862.00023741060568]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "20"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3406.0094751840224, -862.00000026856583],
          [3551.9999824590673, -862.00000598574991],
          [3551.9999960563996, -1001.9987432866235],
          [3405.9999838412646, -1001.9997595006261],
          [3405.9999991664104, -862.00000026430951],
          [3406.0094751840224, -862.00000026856583]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "21"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1678.9998274851544, -1161.0011021577941],
          [1874.0014205182893, -1160.9994294730022],
          [1873.9997478334969, -1393.9960575528667],
          [1678.99648211557, -1393.9943848680743],
          [1679.0165543330727, -1160.9960841034183],
          [1678.9998274851544, -1161.0011021577941]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "22"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1395.9997389012105, -962.99978355923508],
          [1396.0221110603009, -1139.9809160730415],
          [1154.9681603381259, -1139.9942975513763],
          [1154.9681603381259, -963.03762805265058],
          [1395.9953481036314, -962.98410213931174],
          [1395.9997389012105, -962.99978355923508]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "23"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3544.9940558356052, -1087.9985160916153],
          [3640.9998903194623, -1087.9997706052091],
          [3640.9986358058695, -1206.0114462105616],
          [3545.0166370802967, -1206.0047554713935],
          [3544.9698019061257, -1088.0202609939088],
          [3544.9940558356052, -1087.9985160916153]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "24"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1549.9999857383771, -1003.9999928522604],
          [1409.968564819196, -1003.986715916725],
          [1409.9961641182606, -856.99870349106675],
          [1549.9881724020329, -856.9853220127319],
          [1549.9999857383771, -1003.9999928522604]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "25"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3104.9962201229037, -853.00610896665319],
          [3104.9794362354355, -780.99987495130779],
          [3215.0213160308303, -780.98644784133319],
          [3215.0028537546168, -853.00275218915908],
          [3105.0046120666348, -853.00107380041231],
          [3104.9962201229037, -853.00610896665319]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "26"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3106.0150020922124, -700.00419080808581],
          [3106.0233940359485, -700.00419080808581],
          [3216.0014950589662, -699.99412047560497],
          [3215.9914247264837, -770.96646702291946],
          [3106.0015749822383, -771.00003479785551],
          [3106.0150020922124, -700.00419080808581]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "27"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3414.9998666858592, -1336.0001815748269],
          [3499.0004242474565, -1335.9993452324304],
          [3499.0004242474565, -1420.0003209652266],
          [3415.0023757130443, -1420.0032481636108],
          [3414.999030343462, -1336.0010179172218],
          [3414.9998666858592, -1336.0001815748269]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "28"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3724.9997167195661, -1225.9982485956937],
          [3803.9997830959474, -1225.9999212804855],
          [3804.001455780739, -1327.0014379807837],
          [3724.998044034774, -1326.9993471247933],
          [3724.9988803771712, -1225.9984576812933],
          [3724.9997167195661, -1225.9982485956937]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "29"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2945.0000036519486, -1542.000014019841],
          [3042.0000000365744, -1542.0000000331581],
          [3042.0000025888885, -1677.9999950662732],
          [2945.000000384985, -1677.9999975164942],
          [2945.0000101858723, -1542.0000009519913],
          [2945.0000036519486, -1542.000014019841]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "30"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [2837.0007970571201, -1542.0046531065677],
          [2935.9999957178939, -1541.9999976850283],
          [2936.0000006183363, -1676.9999994935251],
          [2836.998706201131, -1676.9993064891078],
          [2837.1074307126, -1542.0069530481553],
          [2837.0007970571201, -1542.0046531065677]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "31"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3570.9981948836607, -865.99974935758974],
          [3676.001899290955, -865.99889449436796],
          [3676.0087381967282, -992.02539525424584],
          [3570.9905011146611, -991.98436181959539],
          [3571.0007594733233, -865.99462017825738],
          [3570.9981948836607, -865.99974935758974]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "32"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3418.0041789262104, -740.02539525424481],
          [3505.0360938198278, -739.99803963114505],
          [3505.0087381967278, -843.00563841533938],
          [3418.0178567377602, -843.03299403843937],
          [3418.0452123608611, -739.99803963114448],
          [3418.0041789262104, -740.02539525424481]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "33"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1445.0007596341545, -723.99803943557015],
          [1539.9996378733208, -723.99992120596107],
          [1539.9921107917585, -837.01591459487338],
          [1445.0020141477482, -837.00086043174667],
          [1445.0153956260831, -723.99427589478807],
          [1445.0007596341545, -723.99803943557015]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "34"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1165.9999877996756, -849.99998654520732],
          [1252.00000072492, -850.00000410513053],
          [1252.0000823989822, -943.99975700868254],
          [1165.9997256259358, -944.00017517987988],
          [1165.998471112342, -850.25246516501124],
          [1165.9999877996756, -849.99998654520732]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "35"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1821.0042739109904, -568.99718476791907],
          [1820.9974350052148, -569.02112093813173],
          [1911.0076933638773, -569.00744312658151],
          [1911.0111128167646, -646.00668324816195],
          [1821.0008544581021, -646.00326379527462],
          [1821.0042739109904, -568.99718476791907]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "36"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1920.0076933638766, -569.00060422080617],
          [1919.990809815243, -569.01983864329816],
          [2010.0027779003499, -569.00274137886061],
          [2010.0006407422964, -646.00005805819228],
          [1920.0008544581017, -646.00668324816172],
          [1920.0076933638766, -569.00060422080617]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "37"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1909.0184266465544, -343.97239373448542],
          [1909.0081682878915, -438.00392868889276],
          [1820.9982898684382, -438.00050923600503],
          [1820.9982898684384, -343.99632990469797],
          [1909.0286850052164, -343.96897428159758],
          [1909.0184266465544, -343.97239373448542]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "38"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1920.0034190477718, -343.99632990469854],
          [1920.2410710234544, -343.96555482871048],
          [2007.99790992923, -344.00145908402976],
          [2008.0132974672251, -437.99708978311804],
          [1920.0102579535469, -437.96973416001777],
          [1920.0034190477718, -343.99632990469854]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "39"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1001.9999853364844, -1153.0000104737564],
          [1089.9999730724105, -1153.0000251750869],
          [1089.9987691967349, -1252.9961129356552],
          [1002.0964337501418, -1253.0000038281914],
          [1001.9999951373711, -1253.0000006210114],
          [1002.0000049382587, -1153.0027285865428],
          [1001.9999853364844, -1153.0000104737564]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "40"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [904.00000348627623, -1152.0000063252326],
          [991.99987851199739, -1151.9998103074838],
          [992.00000919049694, -1252.9999810192373],
          [903.99718736461512, -1252.9997065943885],
          [903.99999695235169, -1152.4226989992721],
          [904.00000348627623, -1152.0000063252326]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "41"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1221.9999832622243, -1412.999991390541],
          [1312.0046036805938, -1412.9967766994569],
          [1311.9999999178983, -1513.9999999537577],
          [1222.0000224657731, -1513.9999922202437],
          [1221.9999963300731, -1413.0107004935626],
          [1221.9999832622243, -1412.999991390541]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "42"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [842.00001416872681, -1413.0000305940919],
          [928.99999775612957, -1412.9999979244672],
          [929.00000061472178, -1513.9999999792826],
          [842.00004030442608, -1513.9999660845467],
          [842.00000110087603, -1413.0038594741227],
          [842.00001416872681, -1413.0000305940919]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "43"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [744.00245640468131, -1413.0017947538338],
          [831.9999792174134, -1413.0000044583926],
          [831.99994001386381, -1513.0000011395737],
          [744.00003885244325, -1513.0000142074236],
          [744.00078371988991, -1413.0009584114382],
          [744.00245640468131, -1413.0017947538338]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "44"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [583.9999108704842, -1413.0001220690433],
          [733.99980134945611, -1413.0005402402408],
          [733.99938317825809, -1513.0011641782189],
          [583.99928361368711, -1513.0040913766038],
          [584.0009562984792, -1413.0009584114373],
          [583.9999108704842, -1413.0001220690433]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "45"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [403.99581876661716, -1413.0022129250337],
          [489.99858002405159, -1413.0089036642005],
          [490.00192539363513, -1512.9986551510315],
          [403.99916413620093, -1512.9902917270726],
          [404.00752756016004, -1413.0406846752458],
          [403.99581876661716, -1413.0022129250337]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "46"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [228.99786315914068, -1547.0160457627569],
          [328.00240330357587, -1546.9993189148388],
          [328.02247552107809, -1633.9872915146689],
          [228.99869950153675, -1633.9998366506077],
          [228.98782705038971, -1546.9884464636914],
          [228.99786315914068, -1547.0160457627569]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "47"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [362.9994906250231, -1153.0003371700066],
          [468.25537655057553, -1152.1467452121692],
          [468.19310164910405, -1253.0119657910461],
          [466.77606980208907, -1253.0000724941883],
          [406.09485523048193, -1253.0104222313373],
          [363.01067670456877, -1153.0324840808494],
          [362.9994906250231, -1153.0003371700066]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "48"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [478.99997185378254, -1152.0000716644843],
          [567.00001022762797, -1151.9999801895344],
          [567.00002329547794, -1252.9999679513892],
          [479.00007639658224, -1252.9999156799897],
          [479.0000763965819, -1252.9791116628903],
          [478.99997185378254, -1152.0000716644843]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "49"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [1504.0004866855838, -1403.0000805838017],
          [1874.002544353383, -1402.999244241405],
          [1873.9883265326509, -1716.9947970239032],
          [1503.9904505768316, -1717.0148692414048],
          [1504.0239042726685, -1402.9850264206732],
          [1504.0004866855838, -1403.0000805838017]
        ]
      ]
    }
  }, {
    "type": "Feature",
    "properties": {
      "spaceid": "50"
    },
    "geometry": {
      "type": "Polygon",
      "coordinates": [
        [
          [3292.0031722296098, -1588.9983562243599],
          [3407.999889917588, -1589.0002379947507],
          [3407.9975899759993, -1846.9996356290974],
          [3291.9996177744274, -1847.0002628858938],
          [3291.9778728721335, -1589.005778763124],
          [3292.0031722296098, -1588.9983562243599]
        ]
      ]
    }
  }]
};

/*----------Variables-----------*/

var map = null;

/*-----------Methods------------*/

function renderMap() {
  //Generate map object
  map = L.map("map", {
    minZoom: 1,
    maxZoom: 6,
    crs: L.CRS.Simple,
    center: [0, 0],
    zoom: 1,
    zoomSnap: 0.7,
    zoomDelta: 0.7,
    wheelPxPerZoomLevel: 120,
    wheelDebounceTime: 40,
    preferCanvas: true,
    attributionControl: false,
    zoomControl: false,
    maxBoundsViscosity: 1.0,
    fadeAnimation: true,
    zoomAnimation: true,
    renderer: L.canvas({
      padding: 1.5
    })
  });
  //Add zoom controls
  L.control.zoom({
    position: "bottomright"
  }).addTo(map);
  //Color all rooms gray by default
  var defaultRoomStyle = {
    "color": "#636363",
    "weight": 1,
    "opacity": 0,
    "fillOpacity": 1
  };
  //Add GeoJSON
  L.geoJson(space_geoJSON, {
    style: defaultRoomStyle,
    coordsToLatLng: function(newcoords) {
      var x = newcoords[0];
      var y = newcoords[1];
      if (newcoords[0] < 0) {
        x = -newcoords[0];
      }
      if (newcoords[1] < 0) {
        y = -newcoords[1];
      }
      return (map.unproject([x, y], map.getMaxZoom() - 1));
    }
  }).addTo(map);
}

function clearMap() {
  map.remove();
  map = null;
}

/*-------Main logic--------*/
//Render map for first time
renderMap();

//Bind click event to button
$("#button").click(function() {
  //Remove existing map
  clearMap();
  //Re-render map
  renderMap();
  //Color polygons with random color
  var hex = Math.floor(Math.random() * 900000) + 100000;
  for (var index in map._layers) {
    if (map._layers.hasOwnProperty(index) && map._layers[index]) {
      var layer = map._layers[index];
      if (layer.feature && layer.feature.properties.spaceid) {
        map._layers[index].setStyle({
          fillColor: "#" + hex
        });
      }
    }
  }
});


	</script>
</body>
</html>
